<!DOCTYPE html>
 <html lang="en">

 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pierre Meyer - Personal Website</title>
  <link href="styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 </head>

 <body>
  <div class="background-animation"></div>
  <header>
  <div class="container">
   <h1>Pierre Meyer</h1>
   <img src="profile.jpeg" alt="Pierre Meyer" class="profile-pic">
   <p>Business Development Manager | Multilingual Professional | Based in Taipei</p>
  </div>
  </header>

  <main class="container">
  <section>
   <h2>About Me</h2>
   <p>
    Hey there! I’m Pierre Meyer, a business development professional with a passion for connecting cultures
    and driving growth. I’ve had the unique experience of building my career across Germany and Taiwan,
    working at the intersection of global business strategy and relationship management.
   </p>
   <p>
    My background spans regulatory affairs, project assistance, and business strategy, with a knack for
    finding creative solutions in fast-paced environments. I thrive in international settings, leveraging
    my fluency in English, German, and Chinese to bridge communication gaps and build meaningful
    connections.
   </p>
  </section>

  <hr class="divider">

  <section>
   <h2>My CV</h2>
   <p>
    <a href="CV.pdf" target="_blank" class="btn">Download My CV</a>
   </p>
  </section>

  <hr class="divider">

  <section>
   <h2>Live Market Prices</h2>
   <p>Here's a quick look at the current prices and trends for Bitcoin and Ethereum. You can select different
    timeframes to see historical data.</p>
   <div class="market-data-container">
   <div class="market-card">
     <h3 class="market-title">Bitcoin (BTC)</h3>
     <div class="current-price" id="btc-price">Loading...</div>
     <div class="price-change" id="btc-change">-</div>
     <div class="timeframe-selector">
     <button data-timeframe="7" class="timeframe-btn active-timeframe">7D</button>
     <button data-timeframe="30" class="timeframe-btn">30D</button>
     </div>
     <div class="graph-container">
     <h4 class="graph-title">Last 7 Days</h4>
     <canvas id="btc-chart-7d"></canvas>
     </div>
     <div class="graph-container" style="display: none;">
     <h4 class="graph-title">Last 30 Days</h4>
     <canvas id="btc-chart-30d"></canvas>
     </div>
     <div class="analysis">
     <p id="btc-analysis">Analysis loading...</p>
     </div>
     <div class="additional-data">
     <p id="btc-volume">Volume (24h): Loading...</p>
     <p id="btc-market-cap">Market Cap: Loading...</p>
     </div>
   </div>
   <div class="market-card">
     <h3 class="market-title">Ethereum (ETH)</h3>
     <div class="current-price" id="eth-price">Loading...</div>
     <div class="price-change" id="eth-change">-</div>
     <div class="timeframe-selector">
     <button data-timeframe="7" class="timeframe-btn active-timeframe">7D</button>
     <button data-timeframe="30" class="timeframe-btn">30D</button>
     </div>
     <div class="graph-container">
     <h4 class="graph-title">Last 7 Days</h4>
     <canvas id="eth-chart-7d"></canvas>
     </div>
     <div class="graph-container" style="display: none;">
     <h4 class="graph-title">Last 30 Days</h4>
     <canvas id="eth-chart-30d"></canvas>
     </div>
     <div class="analysis">
     <p id="eth-analysis">Analysis loading...</p>
     </div>
     <div class="additional-data">
     <p id="eth-volume">Volume (24h): Loading...</p>
     <p id="eth-market-cap">Market Cap: Loading...</p>
     </div>
   </div>
   </div>
  </section>
  </main>

  <footer>
  <div class="container">
   <p>© 2025 Pierre Meyer | <a href="mailto:pierremeyer@outlook.de">Contact Me</a></p>
  </div>
  </footer>

  <script>
  let btcChart7d, ethChart7d, btcChart30d, ethChart30d;
  let currentBtcTimeframe = '7d';
  let currentEthTimeframe = '7d';

  function formatPrice(price) {
   return `$${price.toLocaleString(undefined, {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
   })}`;
  }

  function updatePriceCard(elementId, price, change) {
   const priceElement = document.getElementById(`${elementId}-price`);
   const changeElement = document.getElementById(`${elementId}-change`);

   priceElement.textContent = formatPrice(price);
   changeElement.textContent = `${change >= 0 ? "+" : ""}${change.toFixed(2)}%`;
   changeElement.className = `price-change ${change >= 0 ? "positive" : "negative"}`;
  }

  async function fetchMarketData() {
   try {
    const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true&include_24h_vol=true&include_market_cap=true");
    const priceData = await response.json();

    // Bitcoin data
    const btcPrice = priceData.bitcoin.usd;
    const btcChange = priceData.bitcoin.usd_24h_change;
    const btcVolume = priceData.bitcoin.usd_24h_volume;
    const btcMarketCap = priceData.bitcoin.market_cap;
    updatePriceCard("btc", btcPrice, btcChange);
    document.getElementById("btc-volume").textContent = `Volume (24h): ${btcVolume.toLocaleString()}`;
    document.getElementById("btc-market-cap").textContent = `Market Cap: ${btcMarketCap.toLocaleString()}`;

    // Ethereum data
    const ethPrice = priceData.ethereum.usd;
    const ethChange = priceData.ethereum.usd_24h_change;
    const ethVolume = priceData.ethereum.usd_24h_volume;
    const ethMarketCap = priceData.ethereum.market_cap;
    updatePriceCard("eth", ethPrice, ethChange);
    document.getElementById("eth-volume").textContent = `Volume (24h): ${ethVolume.toLocaleString()}`;
    document.getElementById("eth-market-cap").textContent = `Market Cap: ${ethMarketCap.toLocaleString()}`;

    // Fetch historical data for graphs
    await fetchHistoricalData('bitcoin', 'usd', 7, 'btc-chart-7d');
    await fetchHistoricalData('ethereum', 'usd', 7, 'eth-chart-7d');
    await fetchHistoricalData('bitcoin', 'usd', 30, 'btc-chart-30d');
    await fetchHistoricalData('ethereum', 'usd', 30, 'eth-chart-30d');

   } catch (error) {
    console.error("Error fetching market data:", error);
   }
  }

  async function fetchHistoricalData(coinId, currency, days, chartId) {
   try {
    const response = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=${currency}&days=${days}`);
    const historicalData = await response.json();
    const prices = historicalData.prices.map(price => price[1]);
    const timestamps = historicalData.prices.map(price => new Date(price[0]).toLocaleDateString());

    // Determine trend for color
    const firstPrice = prices[0];
    const lastPrice = prices[prices.length - 1];
    const trendColor = lastPrice >= firstPrice ? '#3fb950' : '#f85149';

    renderChart(chartId, timestamps, prices, trendColor);
    if (coinId === 'bitcoin' && days === 7) {
     calculateAndDisplaySMA(prices, 'btc-analysis');
    } else if (coinId === 'ethereum' && days === 7) {
     calculateAndDisplaySMA(prices, 'eth-analysis');
    }

   } catch (error) {
    console.error(`Error fetching historical data for ${coinId} (${days} days):`, error);
   }
  }

  function renderChart(chartId, labels, data, borderColor) {
   const ctx = document.getElementById(chartId).getContext('2d');
   let chartToDestroy = null;
   if (chartId === 'btc-chart-7d') {
    chartToDestroy = btcChart7d;
   } else if (chartId === 'eth-chart-7d') {
    chartToDestroy = ethChart7d;
   } else if (chartId === 'btc-chart-30d') {
    chartToDestroy = btcChart30d;
   } else if (chartId === 'eth-chart-30d') {
    chartToDestroy = ethChart30d;
   }

   if (chartToDestroy) {
    chartToDestroy.destroy();
   }

   const newChart = new Chart(ctx, {
    type: 'line',
    data: {
     labels: labels,
     datasets: [{
      label: 'Price (USD)',
      data: data,
      borderColor: borderColor,
      borderWidth: 2,
      fill: false,
      tension: 0.4
     }]
    },
    options: {
     responsive: true,
     maintainAspectRatio: false,
     scales: {
      y: {
       beginAtZero: false,
       ticks: {
        display: false
       },
       grid: {
        display: false
       }
      },
      x: {
       ticks: {
        display: false
       },
       grid: {
        display: false
       }
      }
     },
     plugins: {
      legend: {
       display: false
      },
      tooltip: {
       callbacks: {
        label: function (context) {
         return `Price: $${context.parsed.y.toFixed(2)}`;
        }
       }
      }
     }
    }
   });

   if (chartId === 'btc-chart-7d') {
    btcChart7d = newChart;
   } else if (chartId === 'eth-chart-7d') {
    ethChart7d = newChart;
   } else if (chartId === 'btc-chart-30d') {
    btcChart30d = newChart;
   } else if (chartId === 'eth-chart-30d') {
    ethChart30d = newChart;
   }
  }

  function calculateSMA(data, period) {
   if (data.length < period) return null;
   let sum = 0;
   for (let i = data.length - period; i < data.length; i++) {
    sum += data[i];
   }
   return sum / period;
  }

  function calculateAndDisplaySMA(prices, elementId) {
   const sma7 = calculateSMA(prices, 7);
   if (sma7) {
    const analysisElement = document.getElementById(elementId);
    analysisElement.textContent = `7-day SMA: ${sma7.toFixed(2)}`;
   }
  }

  // Function to handle timeframe changes
  async function changeTimeframe(coin, days) {
   const chartId7d = `${coin}-chart-7d`;
   const chartId30d = `${coin}-chart-30d`;

   if (days === 7) {
    document.getElementById(chartId30d).style.display = 'none';
    document.getElementById(chartId7d).style.display = 'block';
   } else if (days === 30) {
    document.getElementById(chartId7d).style.display = 'none';
    document.getElementById(chartId30d).style.display = 'block';
   }

   await fetchHistoricalData(coin, 'usd', days, days === 7 ? chartId7d : chartId30d);
   if (coin === 'btc') {
    currentBtcTimeframe = days === 7 ? '7d' : '30d';
   } else if (coin === 'eth') {
    currentEthTimeframe = days === 7 ? '7d' : '30d';
   }

   // Update active button state
   document.querySelectorAll(`.timeframe-btn`).forEach(btn => btn.classList.remove('active-timeframe'));
   document.querySelector(`.timeframe-btn[data-timeframe="${days}"]`).classList.add('active-timeframe');
  }

  // Event listeners for timeframe buttons
  document.querySelectorAll('.timeframe-btn').forEach(button => {
   button.addEventListener('click', function () {
    const coin = this.closest('.market-card').querySelector('.market-title').textContent.split(' ')[0].toLowerCase();
    const days = parseInt(this.getAttribute('data-timeframe'));
    changeTimeframe(coin, days);
   });
  });


  // Initial load
  fetchMarketData();

  // Real-time updates every 5 seconds (for price only)
  setInterval(async () => {
   try {
    const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true");
    const priceData = await response.json();

    const btcPrice = priceData.bitcoin.usd;
    const btcChange = priceData.bitcoin.usd_24h_change;
    updatePriceCard("btc", btcPrice, btcChange);

    const ethPrice = priceData.ethereum.usd;
    const ethChange = priceData.ethereum.usd_24h_change;
    updatePriceCard("eth", ethPrice, ethChange);
   } catch (error) {
    console.error("Error fetching live prices:", error);
   }
  }, 5000);

  </script>
 </body>

 </html>
