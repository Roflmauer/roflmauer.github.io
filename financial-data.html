<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Data - Pierre Meyer</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body>
<header>
    <div class="container">
        <h1>Financial Data</h1>
        <p>Real-time global index performances</p>
    </div>
</header>

<main class="container">
    <div id="map-container">
        <!-- Embed the SVG directly for better styling -->
        <object id="world-map" type="image/svg+xml" data="world-map.svg"></object>
    </div>
    <div id="index-data"></div>
</main>

<footer>
    <div class="container">
        <p>Â© 2025 Pierre Meyer | <a href="index.html">Back to Home</a></p>
    </div>
</footer>

<script>
// Fetch real-time index data
document.addEventListener("DOMContentLoaded", function() {
    const indices = {
        "DAX": "^GDAXI",
        "TAIEX": "^TWII"
    };

    Object.keys(indices).forEach(async (name) => {
        const data = await fetchIndexData(indices[name]);
        if (data) {
            const info = `${name}: $${data.price} (${data.change} / ${data.changePercent}%)`;

            // Update the map with real-time data
            const elementId = name === "DAX" ? "DE" : "TW";
            const countryElement = document.getElementById(elementId);
            if (countryElement) {
                countryElement.setAttribute("fill", data.change >= 0 ? "#4caf50" : "#f44336");
                countryElement.setAttribute("title", info);
            }

            // Add to the sidebar
            const dataElement = document.createElement("div");
            dataElement.textContent = info;
            dataElement.style.color = data.change >= 0 ? "#4caf50" : "#f44336";
            document.getElementById("index-data").appendChild(dataElement);
        }
    });
});

async function fetchIndexData(symbol) {
    try {
        const response = await fetch(`https://api.example.com/quote/${symbol}`);
        const data = await response.json();
        return {
            price: data.price.toFixed(2),
            change: data.change.toFixed(2),
            changePercent: data.changePercent.toFixed(2)
        };
    } catch (error) {
        console.error("Error fetching index data:", error);
        return null;
    }
}
</script>

</body>
</html>
